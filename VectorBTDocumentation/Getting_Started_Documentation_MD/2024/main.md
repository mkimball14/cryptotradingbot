# Release notes for 2024[¶](https://vectorbt.pro/pvt_7a467f6b/getting-started/release-notes/2024/#release-notes-for-2024 "Permanent link")

All notable changes in reverse chronological order.


# Version 2024.12.15[¶](https://vectorbt.pro/pvt_7a467f6b/getting-started/release-notes/2024/#version-20241215 "Permanent link")

 * Indicators are converted to arrays during broadcasting
 * Renamed `cum_returns` to `cumulative_returns` in [ReturnsAccessor](https://vectorbt.pro/pvt_7a467f6b/api/returns/accessors/#vectorbtpro.returns.accessors.ReturnsAccessor)
 * Renamed `period` to `periods` in [ReturnsAccessor](https://vectorbt.pro/pvt_7a467f6b/api/returns/accessors/#vectorbtpro.returns.accessors.ReturnsAccessor) and [BaseIDXAccessor](https://vectorbt.pro/pvt_7a467f6b/api/base/accessors/#vectorbtpro.base.accessors.BaseIDXAccessor)
 * Added high-performance shortcuts when selecting features or symbols in [Data](https://vectorbt.pro/pvt_7a467f6b/api/data/base/#vectorbtpro.data.base.Data)
 * Added portfolio context helpers for dry-simulating orders
 * Implemented [Portfolio.get_signals](https://vectorbt.pro/pvt_7a467f6b/api/portfolio/base/#vectorbtpro.portfolio.base.Portfolio.get_signals) for extracting signals from orders and trades
 * Made all `column_stack` and `row_stack` methods hybrid, that is, they can be also called as instance methods. For example, `wrapper.stack(*wrappers)` acts similarly to `vbt.ArrayWrapper.row_stack(*wrappers)`.
 * Subplot builder ([PlotsBuilderMixin.plots](https://vectorbt.pro/pvt_7a467f6b/api/generic/plots_builder/#vectorbtpro.generic.plots_builder.PlotsBuilderMixin.plots)) accepts a new `fig` argument to plot over an existing figure. Also, together with metric builder ([StatsBuilderMixin.stats](https://vectorbt.pro/pvt_7a467f6b/api/generic/stats_builder/#vectorbtpro.generic.stats_builder.StatsBuilderMixin.stats)) it takes two more arguments: `per_column` to process each column separately, and `split_columns` to split the current instance into columns rather than to keep the current instance and pass each column label as the `column` argument.
 * Fixed resolution of valuation price in [execute_order_nb](https://vectorbt.pro/pvt_7a467f6b/api/portfolio/nb/core/#vectorbtpro.portfolio.nb.core.execute_order_nb)
 * When doing a common mistake of passing a named tuple as a single argument without a comma, such as `signal_args=(named_tuple)`, an error will be thrown instead of treating the named tuple as arguments
 * Merged PR [#152](https://github.com/polakowo/vectorbt.pro/issues/152 "GitHub Issue: polakowo/vectorbt.pro #152") on behalf of [@kadeng](https://github.com/kadeng "GitHub User: kadeng"), which fixed a warning about invalid escape sequence in [_settings](https://vectorbt.pro/pvt_7a467f6b/api/_settings/#vectorbtpro._settings) and version lookup when symlinking VBT into site-packages
 * Implemented the following cross-knowledge-asset methods that take a VBT object and operate on its knowledge:
 * [find_api](https://vectorbt.pro/pvt_7a467f6b/api/utils/knowledge/custom_assets/#vectorbtpro.utils.knowledge.custom_assets.find_api): finding the API documentation based on the object's interface
 * [find_docs](https://vectorbt.pro/pvt_7a467f6b/api/utils/knowledge/custom_assets/#vectorbtpro.utils.knowledge.custom_assets.find_docs): finding any regular (non-API) documentation based on object's mentions
 * [find_messages](https://vectorbt.pro/pvt_7a467f6b/api/utils/knowledge/custom_assets/#vectorbtpro.utils.knowledge.custom_assets.find_messages): finding any Discord messages based on object's mentions
 * [find_examples](https://vectorbt.pro/pvt_7a467f6b/api/utils/knowledge/custom_assets/#vectorbtpro.utils.knowledge.custom_assets.find_examples): finding any code examples based on object's mentions
 * [find_assets](https://vectorbt.pro/pvt_7a467f6b/api/utils/knowledge/custom_assets/#vectorbtpro.utils.knowledge.custom_assets.find_assets): combining all of the above into one asset
 * [chat_about](https://vectorbt.pro/pvt_7a467f6b/api/utils/knowledge/custom_assets/#vectorbtpro.utils.knowledge.custom_assets.chat_about): chatting using the combined asset
 * Implemented a unified interface for most VBT classes - [Base](https://vectorbt.pro/pvt_7a467f6b/api/utils/base/#vectorbtpro.utils.base.Base) \- which exposes the methods above with the same naming (apart from `chat_about` becoming just `chat`)
 * Added an argument `skip_empty` to [Portfolio.from_orders](https://vectorbt.pro/pvt_7a467f6b/api/portfolio/base/#vectorbtpro.portfolio.base.Portfolio.from_orders) and [Portfolio.from_signals](https://vectorbt.pro/pvt_7a467f6b/api/portfolio/base/#vectorbtpro.portfolio.base.Portfolio.from_signals), which, when disabled, won't skip any rows and will execute all callbacks
 * Implemented [`vbt.get_obj(obj)`](https://vectorbt.pro/pvt_7a467f6b/api/utils/module_/#vectorbtpro.utils.module_.get_obj) for getting any VBT object by its name
 * Made the following functions and decorators more flexible: 
 * [execute](https://vectorbt.pro/pvt_7a467f6b/api/utils/execution/#vectorbtpro.utils.execution.execute): flexible arguments and `executor` instead of `executor_cls`
 * [@iterated](https://vectorbt.pro/pvt_7a467f6b/api/utils/execution/#vectorbtpro.utils.execution.iterated): flexible arguments and `executor` instead of `executor_cls`
 * [@chunked](https://vectorbt.pro/pvt_7a467f6b/api/utils/chunking/#vectorbtpro.utils.chunking.chunked): flexible arguments and `chunker` instead of `chunker_cls`
 * [@parameterized](https://vectorbt.pro/pvt_7a467f6b/api/utils/params/#vectorbtpro.utils.params.parameterized): flexible arguments and `parameterizer` instead of `parameterizer_cls`
 * Tokenizer in chatting now depends on the LLM model
 * Removed `max_context_chars` and `max_context_tokens` in favor of `max_tokens`, which is the total number of tokens in **messages** (default is 120,000)
 * Matches and fields are merged and become unique automatically in [KnowledgeAsset.find](https://vectorbt.pro/pvt_7a467f6b/api/utils/knowledge/base_assets/#vectorbtpro.utils.knowledge.base_assets.KnowledgeAsset.find)
 * Enabled callbacks with different names in staticization. Also, instead of passing an imported callback, it can be provided as a tuple with the module name/path and function name inside the module, such as `signal_func_nb=("my_callbacks.py", "my_signal_func_nb")`.


# Version 2024.11.12[¶](https://vectorbt.pro/pvt_7a467f6b/getting-started/release-notes/2024/#version-20241112 "Permanent link")

 * Implemented a sub-package [utils.knowledge](https://vectorbt.pro/pvt_7a467f6b/api/utils/knowledge/) for working with knowledge assets. Knowledge assets are data that encompasses knowledge about VBT, such as Discord messages and website pages. See [cookbook](https://vectorbt.pro/pvt_7a467f6b/cookbook/knowledge/) for usage examples.
 * Added native support for NumPy 2.0. The default integer and floating precisions are 64 bits. They can be changed in [NumPy settings](https://vectorbt.pro/pvt_7a467f6b/api/_settings/#vectorbtpro._settings.numpy).
 * Fixed selection of date ranges in Plotly figures
 * Indicators now have a `get` method
 * Added portfolio context helpers for getting the current order size and value. Also, fixed [get_col_position_value_nb](https://vectorbt.pro/pvt_7a467f6b/api/portfolio/nb/ctx_helpers/#vectorbtpro.portfolio.nb.ctx_helpers.get_col_position_value_nb).
 * Renamed decorators `classproperty` to `class_property`, `class_or_instanceproperty` to `hybrid_property`, and `class_or_instancemethod` to `hybrid_method`
 * Fixed behavior `size_granularity` and `allow_partial` when reversing positions
 * Renamed settings `messaging.telegram` to `telegram.bot`
 * Added support for ZIP archives when saving and loading
 * Renamed `multiline_eval` to `evaluate`
 * Added a set of functions to work with nested objects, such as [flatten_obj](https://vectorbt.pro/pvt_7a467f6b/api/utils/search/#vectorbtpro.utils.search.flatten_obj), and path-like keys, such as [get_pathlike_key](https://vectorbt.pro/pvt_7a467f6b/api/utils/search/#vectorbtpro.utils.search.get_pathlike_key)
 * Added a set of functions to [find](https://vectorbt.pro/pvt_7a467f6b/api/utils/search/#vectorbtpro.utils.search.find) and [replace](https://vectorbt.pro/pvt_7a467f6b/api/utils/search/#vectorbtpro.utils.search.replace) occurrences in text, including [FuzzySearch](https://github.com/taleinat/fuzzysearch) and [RapidFuzz](https://github.com/rapidfuzz/RapidFuzz)
 * Templates not only have access to `np`, `pd`, and `vbt`, but to everything from `from vectorbtpro import *`
 * Each template subclass has got a method [CustomTemplate.get_context_vars](https://vectorbt.pro/pvt_7a467f6b/api/utils/template/#vectorbtpro.utils.template.CustomTemplate.get_context_vars) to detect context variables even before evaluation
 * Added functions for flexible reordering of [dicts](https://vectorbt.pro/pvt_7a467f6b/api/utils/config/#vectorbtpro.utils.config.reorder_dict) and [lists](https://vectorbt.pro/pvt_7a467f6b/api/utils/config/#vectorbtpro.utils.config.reorder_list)
 * Fixed indexing of indicators with multiple columns
 * Renamed `plot_cum_returns` to `plot_cumulative_returns` in [Portfolio](https://vectorbt.pro/pvt_7a467f6b/api/portfolio/base/#vectorbtpro.portfolio.base.Portfolio)
 * Any package can be searched for any object with [search_package](https://vectorbt.pro/pvt_7a467f6b/api/utils/module_/#vectorbtpro.utils.module_.search_package)
 * Most classes now have [Chainable.chain](https://vectorbt.pro/pvt_7a467f6b/api/utils/chaining/#vectorbtpro.utils.chaining.Chainable.chain) method for connecting multiple pipes
 * Any object can be dumped into a string with [`vbt.dump(obj)`](https://vectorbt.pro/pvt_7a467f6b/api/utils/formatting/#vectorbtpro.utils.formatting.dump)
 * Made datetime components ([DTC](https://vectorbt.pro/pvt_7a467f6b/api/utils/datetime_/#vectorbtpro.utils.datetime_.DTC)) Numba-resilient by replacing `None` by `-1` in the enumerated tuple equivalent


# Version 2024.8.20[¶](https://vectorbt.pro/pvt_7a467f6b/getting-started/release-notes/2024/#version-2024820 "Permanent link")

 * Portfolio instances now accept the argument `weights`, which is a vector of weights, one per column. Weights are applied to the initial position, initial cash, cash deposits, cash earnings, as well as order records. They are used to scale up or down a column relative to its group or the entire portfolio. Weights can be applied after creating a portfolio instance with [Portfolio.apply_weights](https://vectorbt.pro/pvt_7a467f6b/api/portfolio/base/#vectorbtpro.portfolio.base.Portfolio.apply_weights) and optionally rescaled by group by passing `rescale=True` to the same method.
 * Implemented the data class [FinPyData](https://vectorbt.pro/pvt_7a467f6b/api/data/custom/finpy/#vectorbtpro.data.custom.finpy.FinPyData) for `findatapy` (<https://github.com/cuemacro/findatapy>), which allows pulling data from Bloomberg, Eikon, Quandl, Dukascopy, etc.
 * Implemented portfolio views (that is, methods and properties that return other portfolio instances) that include orders of either long positions ([Portfolio.long_view](https://vectorbt.pro/pvt_7a467f6b/api/portfolio/base/#vectorbtpro.portfolio.base.Portfolio.long_view)) or short positions ([Portfolio.short_view](https://vectorbt.pro/pvt_7a467f6b/api/portfolio/base/#vectorbtpro.portfolio.base.Portfolio.short_view))
 * Implemented methods to convert Pandas Series and DataFrames to [Data](https://vectorbt.pro/pvt_7a467f6b/api/data/base/#vectorbtpro.data.base.Data) instances: OHLC(V) DataFrames can be converted via `data = df.vbt.ohlcv.to_data()` while Series/DataFrames where symbols are columns can be converted via a more general `data = df.vbt.to_data()`
 * Indicators now behave like regular arrays when combined with other arrays. Also, when an indicator has multiple outputs but there's an output of the same name as the short name of the indicator (like "atr" in [ATR](https://vectorbt.pro/pvt_7a467f6b/api/indicators/custom/atr/#vectorbtpro.indicators.custom.atr.ATR)), that one output becomes the main output that gets combined.
 * Added options `PriceType.NextValidOpen` (or "nextvalidopen") and `PriceType.NextValidClose` (or "nextvalidclose") that use the next non-NA open and close price respectively
 * Fixed [TVClient.search_symbol](https://vectorbt.pro/pvt_7a467f6b/api/data/custom/tv/#vectorbtpro.data.custom.tv.TVClient.search_symbol). Added a back-adjustment option for symbols ending with "!A". Also, the user agent is now a global constant (see `vbt.data.custom.tv.USER_AGENT`) and is used in most connection settings by default.
 * [Data.add_symbol](https://vectorbt.pro/pvt_7a467f6b/api/data/base/#vectorbtpro.data.base.Data.add_symbol) re-uses keyword arguments previously used in fetching (if `reuse_fetch_kwargs` is True, which is now default). Also, [Data.add_feature](https://vectorbt.pro/pvt_7a467f6b/api/data/base/#vectorbtpro.data.base.Data.add_feature) can use pulling instead of running as well (if `pull_feature` is True).
 * Fixed plotting of [ADX](https://vectorbt.pro/pvt_7a467f6b/api/indicators/custom/adx/#vectorbtpro.indicators.custom.adx.ADX)
 * Fixed package version comparison that leads to "NameError: name 'post1' is not defined"
 * Fixed `read_only` argument resolution in [DuckDBData](https://vectorbt.pro/pvt_7a467f6b/api/data/custom/duckdb/#vectorbtpro.data.custom.duckdb.DuckDBData)
 * Allowed renaming index in [Data](https://vectorbt.pro/pvt_7a467f6b/api/data/base/#vectorbtpro.data.base.Data)
 * As per [@rayanbenredjeb](https://github.com/rayanbenredjeb "GitHub User: rayanbenredjeb") suggestion and contribution (thank you!), reduced two loops computation to a single loop in covariance and correlation functions
 * Fixed parameter index for `per_column=True` in [IndicatorFactory](https://vectorbt.pro/pvt_7a467f6b/api/indicators/factory/#vectorbtpro.indicators.factory.IndicatorFactory)
 * Fixed mapping of start and end dates in [BentoData](https://vectorbt.pro/pvt_7a467f6b/api/data/custom/bento/#vectorbtpro.data.custom.bento.BentoData)
 * Adapted scheduling functionality to the `schedule` package of the version 1.2.2 and above
 * Fixed integer size granularity leading to an incorrect order size due to floating-point errors
 * Fixed NaN resolution in [PIVOTINFO](https://vectorbt.pro/pvt_7a467f6b/api/indicators/custom/pivotinfo/#vectorbtpro.indicators.custom.pivotinfo.PIVOTINFO)
 * Re-added the arguments `use_asset_returns` and `bm_returns` to portfolio plotting methods


# Version 2024.6.19[¶](https://vectorbt.pro/pvt_7a467f6b/getting-started/release-notes/2024/#version-2024619 "Permanent link")

 * [PortfolioOptimizer.from_allocate_func](https://vectorbt.pro/pvt_7a467f6b/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.from_allocate_func) and [PortfolioOptimizer.from_optimize_func](https://vectorbt.pro/pvt_7a467f6b/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.from_optimize_func) accept an argument `group_execute_kwargs` that controls the execution of groups
 * [PortfolioOptimizer.from_optimize_func](https://vectorbt.pro/pvt_7a467f6b/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.from_optimize_func) accepts [Takeable](https://vectorbt.pro/pvt_7a467f6b/api/generic/splitting/base/#vectorbtpro.generic.splitting.base.Takeable) instances. Taking is done with [Splitter.take_range_from_takeable](https://vectorbt.pro/pvt_7a467f6b/api/generic/splitting/base/#vectorbtpro.generic.splitting.base.Splitter.take_range_from_takeable), which also accepts many formats including arrays with a different index.
 * Most objects now have a `split_apply` method that splits the object and applies a function on each chunk. The first argument is the function while other arguments are distributed in the same way as in the method `split`.
 * If the index of data pulled by [Data](https://vectorbt.pro/pvt_7a467f6b/api/data/base/#vectorbtpro.data.base.Data) is not sorted, it will be sorted while keeping the order of duplicates. If it's monotonically decreasing, it will be reversed.
 * [SQLData](https://vectorbt.pro/pvt_7a467f6b/api/data/custom/sql/#vectorbtpro.data.custom.sql.SQLData) sorts data by index directly in the database
 * In-house Plotly figures have got a method `select_range` that recursively selects a specified date range across all traces and shapes in the figure, making it especially useful for rendering granular data quickly or for exploring specific parts of data more efficiently. By default, it returns a new figure.
 * Fixed NaN resolution in [PIVOTINFO](https://vectorbt.pro/pvt_7a467f6b/api/indicators/custom/pivotinfo/#vectorbtpro.indicators.custom.pivotinfo.PIVOTINFO)
 * Argument `tz` passed by the user when pulling data with most [Data](https://vectorbt.pro/pvt_7a467f6b/api/data/base/#vectorbtpro.data.base.Data) subclasses will also default to `tz_localize` (not only to `tz_convert`)
 * Added `eval_id` to all chunking classes. This enables nested chunking since now the user can specify which function (or decorator) should evaluate which array, for example, to define different execution rules for different arrays. If the `eval_id` of the function doesn't match with the `eval_id` of the array, the array will be forwarded downstream to be evaluated by the inner function.
 * Added the class [Task](https://vectorbt.pro/pvt_7a467f6b/api/utils/execution/#vectorbtpro.utils.execution.Task), which behaves the same as the tuple format `(func, args, kwargs)`, but in a more user-friendly way. Argument `funcs_args` in [Executor.run](https://vectorbt.pro/pvt_7a467f6b/api/utils/execution/#vectorbtpro.utils.execution.Executor.run) and other places has been renamed to `tasks`. Also, renamed the option `distribute="calls"` to `distribute="tasks"`.
 * [Executor](https://vectorbt.pro/pvt_7a467f6b/api/utils/execution/#vectorbtpro.utils.execution.Executor) can merge execution results by accepting `merge_func` and `merge_kwargs`. Also, it can filter out `NoResult` instances if `filter_results` is True (not default) and raise an error if all results are `NoResult` instances and `raise_no_results` is True (default). Generally, the logic to filter out missing results has been standardized and outsourced to [filter_out_no_results](https://vectorbt.pro/pvt_7a467f6b/api/utils/execution/#vectorbtpro.utils.execution.filter_out_no_results).
 * Implemented a new decorator [@iterated](https://vectorbt.pro/pvt_7a467f6b/api/utils/execution/#vectorbtpro.utils.execution.iterated) that takes a function and executes it repeatedly on values of an argument passed to this function (usually the first argument, but can be specified with `over_arg`)
 * Connections in [DuckDBData](https://vectorbt.pro/pvt_7a467f6b/api/data/custom/duckdb/#vectorbtpro.data.custom.duckdb.DuckDBData) are closed automatically when provided as a string. This allows simultaneously opening two connections with different access modes.
 * Cache clearing (`chunk_clear_cache`), garbage collection (`chunk_collect_garbage`), and delay (`chunk_delay`) can be done after executing each (super-)chunk with [Executor](https://vectorbt.pro/pvt_7a467f6b/api/utils/execution/#vectorbtpro.utils.execution.Executor)
 * Progress bars are now hidden within parallel workflows. Also, tqdm bars are no longer opened by default when progress shouldn't be shown (can be changed by setting `force_open_bar=True`)
 * Signal factory accepts `jitted` argument to control jitting of generation functions
 * Integrated [Smart Money Concepts (SMC)](https://github.com/joshyattridge/smart-money-concepts) into [IndicatorFactory.from_smc](https://vectorbt.pro/pvt_7a467f6b/api/indicators/factory/#vectorbtpro.indicators.factory.IndicatorFactory.from_smc)
 * Added 5 different Numba-compiled implementations of (rolling) Hurst exponent in [HURST](https://vectorbt.pro/pvt_7a467f6b/api/indicators/custom/hurst/#vectorbtpro.indicators.custom.hurst.HURST)


# Version 2024.5.15[¶](https://vectorbt.pro/pvt_7a467f6b/getting-started/release-notes/2024/#version-2024515 "Permanent link")

 * Refactored execution engines. In addition to the function [execute](https://vectorbt.pro/pvt_7a467f6b/api/utils/execution/#vectorbtpro.utils.execution.execute), there's now a class [Executor](https://vectorbt.pro/pvt_7a467f6b/api/utils/execution/#vectorbtpro.utils.execution.Executor) that takes execution-related arguments and exposes a method [Executor.run](https://vectorbt.pro/pvt_7a467f6b/api/utils/execution/#vectorbtpro.utils.execution.Executor.run) to run these arguments on function(s) calls. Whenever the function [execute](https://vectorbt.pro/pvt_7a467f6b/api/utils/execution/#vectorbtpro.utils.execution.execute) is called, it constructs an instance of the executor and calls the run method. Also, outsourced many preprocessing and postprocessing workflows to standalone methods that can be overridden by the user, such as [Executor.call_pre_chunk_func](https://vectorbt.pro/pvt_7a467f6b/api/utils/execution/#vectorbtpro.utils.execution.Executor.call_pre_chunk_func) that is called before a chunk is processed. In addition, keys can be supplied along with function calls. Each key is a description of what the function call represents, and can be used in progress bars.
 * Implemented (super-)chunk caching in the executor. If (super-)chunking is enabled with `cache_chunks=True` and execution-specific caching directory is specified in `chunk_cache_dir` (will be created if not existing), the results of each chunk will be serialized and stored on disk. Whenever the execution is stopped and then re-run, the results of each (previously cached) chunk will be loaded from disk. If `pre_clear_chunk_cache` is True, will clear the caching directory before execution. If `release_chunk_cache` is True, won't keep the results in memory but replace them with a dummy object. Then, when the entire execution is complete, will replace all dummy objects with actual results loaded from disk. By default (`post_clear_chunk_cache=True`), will remove the caching directory once the entire execution is complete.
 * Resolution of defaults in all execution engines, the executor, the chunker, and the parameterizer now happens at the initialization time for atomicity
 * Each progress bar can now display a relevant description of the currently processed item. For instance, a daily range between the dates _"2024-01-01 00:00:00"_ and _"2025-01-01 00:00:00"_ is displayed as _"2024-01-01 → 2025-01-01"_. Progress description is shown as a postfix to avoid progress bars of varying lengths. This option (`as_postfix`) can be changed in the pbar-related settings.
 * Progress bars are now enabled on default (i.e., there's no need to provide `show_progress=True` anymore), but will be displayed only if they aren't complete before a number of seconds (`delay`)
 * Implemented a context manager for progress bars [ProgressBar](https://vectorbt.pro/pvt_7a467f6b/api/utils/pbar/#vectorbtpro.utils.pbar.ProgressBar) that replaces the function `get_pbar`. It wraps a `tqdm` instance and supercharges it with userful enhancements while exposing identically-named methods. For example, [ProgressBar.update](https://vectorbt.pro/pvt_7a467f6b/api/utils/pbar/#vectorbtpro.utils.pbar.ProgressBar.update) not only updates the `tqdm` instance but also calls some pre-update and post-update workflows.
 * Enabled reusable and nested progress bars by implementing a registry class [PBarRegistry](https://vectorbt.pro/pvt_7a467f6b/api/registries/pbar_registry/#vectorbtpro.registries.pbar_registry.PBarRegistry) and its instance [pbar_reg](https://vectorbt.pro/pvt_7a467f6b/api/registries/pbar_registry/#vectorbtpro.registries.pbar_registry.pbar_reg), that registers all currently active and pending, parent and child progress bars. Each progress bar gets its own unique identifier, which can be either supplied by the user or generated automatically. Whenever a child progress bar finishes iterating, it gets a pending status; later, when a progress bar with the same identifier should be registered, it reuses the already registered pending progress bar. Once the parent progress bar stops, all children are closed and deregistered. The parent-child relationship is determined based on the time each bar was opened/updated/closed. To disable, set `reuse` to False.
 * All progress bars can be shown or hidden within a code block by using the context managers [ProgressShown](https://vectorbt.pro/pvt_7a467f6b/api/utils/pbar/#vectorbtpro.utils.pbar.ProgressShown) and [ProgressHidden](https://vectorbt.pro/pvt_7a467f6b/api/utils/pbar/#vectorbtpro.utils.pbar.ProgressHidden) respectively
 * The case of the day unit has been changed to uppercase (from "d" to "D")
 * Extended offset string translation. For example, "businessmonthstart" will be translated to "BMS". Also, all aliases now work the same way in both older and newer Pandas versions.
 * Created many convenient datetime shortcuts, for example `vbt.timestamp()` returns the same as `pd.Timestamp.now()` while `vbt.offset("M")` returns `pd.offsets.MonthBegin()`
 * Simulation range can now be modified from within a simulation. Each context has new fields [SimulationContext.sim_start](https://vectorbt.pro/pvt_7a467f6b/api/portfolio/enums/#vectorbtpro.portfolio.enums.SimulationContext.sim_start) and [SimulationContext.sim_end](https://vectorbt.pro/pvt_7a467f6b/api/portfolio/enums/#vectorbtpro.portfolio.enums.SimulationContext.sim_end), which are guaranteed to be one-dimensional NumPy arrays with values per group. Lowering the second array in-place will have an effect on the current simulation. In particular, setting it to the next row or earlier will process the current row to the end and stop the simulation at the next one; this can be done conveniently by calling [`vbt.stop_group_sim_nb(c)`](https://vectorbt.pro/pvt_7a467f6b/api/portfolio/nb/ctx_helpers/#vectorbtpro.portfolio.nb.ctx_helpers.stop_group_sim_nb).
 * Simulation range passed to a simulation method is persisted in the simulation output ([SimulationOutput](https://vectorbt.pro/pvt_7a467f6b/api/portfolio/enums/#vectorbtpro.portfolio.enums.SimulationOutput)) per column (as opposed to the per-group layout when being passed to the method)
 * Adapted portfolio analysis as well as return methods and properties to simulation ranges. Whenever a simulation range is active, the respective Numba function will process data only within this range. Moreover, any simulation range can be activated/modified/deactivated dynamically, even in stats. For example, `pf.get_sharpe_ratio(sim_start="2024")` will return the Sharpe ratio only for the rows from 2024 onwards. If `rec_sim_range` is False (default), only the latest analysis step respects the simulation range. In the example above, returns are computed on all rows while only the Sharpe ratio is computed within the range. If `rec_sim_range` is True, the entire analysis chain respects the simulation range (similar to backpropagation). Here, `pf.get_sharpe_ratio(sim_start="2024", rec_sim_range=True)` will return the Sharpe ratio as if orders before 2024 didn't exist. 
 * Renamed metrics "Start", "End", and "Period" to "Start Index", "End Index", and "Total Duration" respectively. These metrics respect the currently active simulation range.
 * Improved most portfolio subplots. They respect the currently active simulation range and, similarly to metrics, can be called as class methods on already pre-calculated arrays.
 * Redesigned Numba-compiled return metrics. Rolling metrics have become standalone Numba functions.
 * Symbol sorting in `list_symbols` of custom data classes is now optional. If sorting has been disabled by the user, symbols will be returned in the native order of the data provider.
 * Stops won't be executed right away if the option `StopExitPrice.Close` is active
 * A human-readable error will be thrown if the user failed to provide arguments as a tuple
 * OHLC DataFrames can be passed as `close` in portfolio factory methods. They will be recognized as data-like instances if all features ("Open", "High", "Low", and "Close") are present.
 * Refactored Numba functions in [portfolio.nb.ctx_helpers](https://vectorbt.pro/pvt_7a467f6b/api/portfolio/nb/ctx_helpers/). Those functions that have a prefix "col" or "group" can now be called from any callback, not only from callbacks that have a compatible context.
 * Whenever [TVData](https://vectorbt.pro/pvt_7a467f6b/api/data/custom/tv/#vectorbtpro.data.custom.tv.TVData) fails at pulling a symbol, it retries several times


# Version 2024.4.1[¶](https://vectorbt.pro/pvt_7a467f6b/getting-started/release-notes/2024/#version-202441 "Permanent link")

 * Limit and stop price checks are more robust to floating-point errors
 * Fixed partial resolution of keyword arguments when merging VBT objects
 * Fixed `size_type` not being applied to `min_size` and `max_size` in [Portfolio.from_signals](https://vectorbt.pro/pvt_7a467f6b/api/portfolio/base/#vectorbtpro.portfolio.base.Portfolio.from_signals)
 * [BaseAccessor.combine](https://vectorbt.pro/pvt_7a467f6b/api/base/accessors/#vectorbtpro.base.accessors.BaseAccessor.combine) always produces a DataFrame when passing a sequence of arrays (even with one array)
 * Providing a list with a single parameter value to an indicator always produces a DataFrame
 * Created decorators for all profilers in [profiling](https://vectorbt.pro/pvt_7a467f6b/api/utils/profiling/)
 * All simulation methods now take arguments `sim_start` and `sim_end` (both defaulting to None) that indicate at which row the simulation should start and end for each column or group. This will skip all rows preceding `sim_start` and succeeding `sim_end`, which may result in a faster execution, especially for simulations with sparse orders (such as due to signal unraveling). Both arguments can be provided as datetimes and human-readable strings - they will be converted to indices automatically. Also, many simulation methods accept `sim_start="auto"` and `sim_end="auto"` to determine an optimal simulation range from inputs such as signals or order size.
 * If an indicator has a single output (especially with a generic name such as "real"), VBT creates two dynamic aliases for it: the short name of the indicator (such as "sma") and "output". For example, the method `real_crossed_above` can be also accessed via `sma_crossed_above`, `output_crossed_above`, and even just `crossed_above` (without any prefix).
 * Renamed the field `sub_id` in templates to `eval_id`
 * Added `eval_id` to both parameters ([Param](https://vectorbt.pro/pvt_7a467f6b/api/utils/params/#vectorbtpro.utils.params.Param)) and takeables ([Takeable](https://vectorbt.pro/pvt_7a467f6b/api/generic/splitting/base/#vectorbtpro.generic.splitting.base.Takeable)). This enables nested parameterization and splitting since now the user can specify which function (or decorator) should evaluate which parameter, for example, to define different execution rules for different parameters. If the `eval_id` of the function doesn't match with the `eval_id` of the parameter, the parameter will be forwarded downstream to be evaluated by the inner function.
 * Standardized attribute classes, such as [Param](https://vectorbt.pro/pvt_7a467f6b/api/utils/params/#vectorbtpro.utils.params.Param). To define an attribute class, decorate it with [@define](https://vectorbt.pro/pvt_7a467f6b/api/utils/attr_/#vectorbtpro.utils.attr_.define), subclass [define.mixin](https://vectorbt.pro/pvt_7a467f6b/api/utils/attr_/#vectorbtpro.utils.attr_.define.mixin), and define fields with [define.field](https://vectorbt.pro/pvt_7a467f6b/api/utils/attr_/#vectorbtpro.utils.attr_.define.field). Also, added a concept of a missing value (`MISSING`), which powers required and optional fields that don't raise an error during the initialization step, only at the validation step. This enables one key feature: instances of attribute classes know which arguments were explicitly provided by the user for better printing and more granular merging of multiple instances.
 * Fixed potential division-by-zero errors in portfolio records
 * Patched frequency-based `dt_stop`
 * When translating a datetime object to nanoseconds, there's now a global flag `tz_naive_ns` in [settings.datetime_](https://vectorbt.pro/pvt_7a467f6b/api/_settings/#vectorbtpro._settings.datetime_) that controls whether the timezone should be dropped (True) or converted to UTC (False) before conversion
 * Extended portfolio helper functions in [portfolio.nb.ctx_helpers](https://vectorbt.pro/pvt_7a467f6b/api/portfolio/nb/ctx_helpers/). For instance, the user can now get most information for a custom column or group.
 * Patched `length="optimize"` in [Splitter.from_n_rolling](https://vectorbt.pro/pvt_7a467f6b/api/generic/splitting/base/#vectorbtpro.generic.splitting.base.Splitter.from_n_rolling)
 * Renamed `index_stack_kwargs` to `clean_index_kwargs`
 * Most classes now subclass [HasItems](https://vectorbt.pro/pvt_7a467f6b/api/utils/params/#vectorbtpro.utils.params.HasItems) and [Paramable](https://vectorbt.pro/pvt_7a467f6b/api/utils/params/#vectorbtpro.utils.params.Paramable). When calling `obj.items()`, it splits the object along the column/group axis and returns an iterator of column/group labels and sub-objects where each sub-object contains only one column/group of data. Also, when calling `obj.as_param()` or `vbt.Param(obj)`, it returns a [Param](https://vectorbt.pro/pvt_7a467f6b/api/utils/params/#vectorbtpro.utils.params.Param) instance where values are sub-objects and keys are column/group labels. This way, the user can use objects of any complexity as parameters to process only one configuration at a time.
 * Renamed `yield_group_lens_idxs` to `iter_group_lens`, `yield_group_map_idxs` to `iter_group_map`, and `__iter__` to `iter_groups` in [Grouper](https://vectorbt.pro/pvt_7a467f6b/api/base/grouping/#vectorbtpro.base.grouping.base.Grouper)
 * [Records.records_readable](https://vectorbt.pro/pvt_7a467f6b/api/records/base/#vectorbtpro.records.base.Records.records_readable) and [MappedArray.mapped_readable](https://vectorbt.pro/pvt_7a467f6b/api/records/mapped_array/#vectorbtpro.records.mapped_array.MappedArray.mapped_readable) have now an alias `readable`
 * Most classes now subclass [IndexApplier](https://vectorbt.pro/pvt_7a467f6b/api/base/indexes/#vectorbtpro.base.indexes.IndexApplier) with methods for working with index and columns. For example, to drop a parameter from a portfolio: `new_pf = pf.drop_levels(param_name)`
 * Parameter conditions ([Param.condition](https://vectorbt.pro/pvt_7a467f6b/api/utils/params/#vectorbtpro.utils.params.Param.condition)) can be provided as a template. Also, to access any key (or level in the parameter index) of a parameter combination, wrap the parameter (or level) name with `__`. For example, when combining a fast and slow SMA indicators, the condition can be `"__fast_window__ < __slow_window__"` if `fast_window` and `slow_window` are level names in the parameter index.
 * Short name and level names of an indicator can be changed using [IndicatorBase.rename](https://vectorbt.pro/pvt_7a467f6b/api/indicators/factory/#vectorbtpro.indicators.factory.IndicatorBase.rename) and [IndicatorBase.rename_levels](https://vectorbt.pro/pvt_7a467f6b/api/indicators/factory/#vectorbtpro.indicators.factory.IndicatorBase.rename_levels) respectively
 * Method `split` of most objects, as well as the decorators `@split` and `@cv_split`, allow providing keyword arguments related to splitting, taking, and applying as variable arguments (in addition to `splitter_kwargs`, `take_kwargs`, and `apply_kwargs`). The distribution of these arguments over the the respective functions is done automatically. Also, the splitting method can be guessed by keyword arguments when `splitter` is None. For example, calling `obj.split(n=10, into="stacked")` will call [Splitter.from_n_rolling](https://vectorbt.pro/pvt_7a467f6b/api/generic/splitting/base/#vectorbtpro.generic.splitting.base.Splitter.from_n_rolling) with `n=10` and then [Splitter.take](https://vectorbt.pro/pvt_7a467f6b/api/generic/splitting/base/#vectorbtpro.generic.splitting.base.Splitter.take) with `into="stacked"`
 * Adapted the package <https://github.com/sam31415/timeseriescv> in [generic.splitting.purged](https://vectorbt.pro/pvt_7a467f6b/api/generic/splitting/purged/) and added factory methods [Splitter.from_purged_walkforward](https://vectorbt.pro/pvt_7a467f6b/api/generic/splitting/base/#vectorbtpro.generic.splitting.base.Splitter.from_purged_walkforward) and [Splitter.from_purged_kfold](https://vectorbt.pro/pvt_7a467f6b/api/generic/splitting/base/#vectorbtpro.generic.splitting.base.Splitter.from_purged_kfold)
 * Renamed `SKLSplitter` to `SplitterCV`
 * Similar to [StopExitPrice](https://vectorbt.pro/pvt_7a467f6b/api/portfolio/enums/#vectorbtpro.portfolio.enums.StopExitPrice) for stop orders, added [LimitOrderPrice](https://vectorbt.pro/pvt_7a467f6b/api/portfolio/enums/#vectorbtpro.portfolio.enums.LimitOrderPrice) for limit orders
 * Wrote [Backtest powerful intraday trading strategies](https://pyquantnews.com/backtest-powerful-intraday-trading-strategies/) ![📔](https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/1f4d4.svg)


# Version 2024.2.22[¶](https://vectorbt.pro/pvt_7a467f6b/getting-started/release-notes/2024/#version-2024222 "Permanent link")

 * Doing the star-import `from vectorbtpro import *` will return a minimal list of imports that are essential to working with VBT, such as `pd`, `np`, and `vbt` itself. This will not pollute the namespace with VBT-own objects as they are exclusively accessible from `vbt`. In case of any static analysis issues, VBT can still be imported in a classic way - `import vectorbtpro as vbt`. The start import behavior can be controlled by the setting `star_import` in [settings.importing](https://vectorbt.pro/pvt_7a467f6b/api/_settings/#vectorbtpro._settings.importing), which accepts be "all", "vbt" (previous behavior), "minimal" (current behavior), and "none". This setting can be changed only via a configuration file. All notebooks and website examples have been updated accordingly.
 * Implemented portfolio methods (and their corresponding properties) for calculating the average entry price and exit price of each position and bar - [Portfolio.get_position_entry_price](https://vectorbt.pro/pvt_7a467f6b/api/portfolio/base/#vectorbtpro.portfolio.base.Portfolio.get_position_entry_price) and [Portfolio.get_position_exit_price](https://vectorbt.pro/pvt_7a467f6b/api/portfolio/base/#vectorbtpro.portfolio.base.Portfolio.get_position_exit_price) respectively
 * Modeling of signal pairs for [SignalsAccessor.between_ranges](https://vectorbt.pro/pvt_7a467f6b/api/signals/accessors/#vectorbtpro.signals.accessors.SignalsAccessor.between_ranges) and other methods has been redesigned and is now based on `relation` of type [SignalRelation](https://vectorbt.pro/pvt_7a467f6b/api/signals/enums/#vectorbtpro.signals.enums.SignalRelation). For example, behavior of `from_other=True` can now be replicated with `relation="manyone"`. Also, changed `other` to `target` across [SignalsAccessor](https://vectorbt.pro/pvt_7a467f6b/api/signals/accessors/#vectorbtpro.signals.accessors.SignalsAccessor).
 * Implemented the following methods for signal unraveling:
 * [SignalsAccessor.unravel](https://vectorbt.pro/pvt_7a467f6b/api/signals/accessors/#vectorbtpro.signals.accessors.SignalsAccessor.unravel): "unravels" each signal to a separate column
 * [SignalsAccessor.unravel_between](https://vectorbt.pro/pvt_7a467f6b/api/signals/accessors/#vectorbtpro.signals.accessors.SignalsAccessor.unravel_between): "unravels" each signal pair in one or two masks to a separate column
 * [SignalsAccessor.ravel](https://vectorbt.pro/pvt_7a467f6b/api/signals/accessors/#vectorbtpro.signals.accessors.SignalsAccessor.ravel): "ravels" all separate columns back into one column
 * Standardized datetime and frequency functionality across the entire codebase. Added new frequency aliases, such as week days and months; for example, `every="monday"` will return an index with only mondays. Frequency is now allowed to be a date offset of any complexity, and will be stored in its original format. Only when actually needed, it can be converted into a timedelta by approximation. Also, frequency can now being detected automatically from index when set to `"auto"` (this is the new global default, see [infer_index_freq](https://vectorbt.pro/pvt_7a467f6b/api/utils/datetime_/#vectorbtpro.utils.datetime_.infer_index_freq) for other options). Same for year frequency (the default remains "365 days" for backward compatibility, see [ReturnsAccessor.get_year_freq](https://vectorbt.pro/pvt_7a467f6b/api/returns/accessors/#vectorbtpro.returns.accessors.ReturnsAccessor.get_year_freq) for other options).
 * [Records.to_readable](https://vectorbt.pro/pvt_7a467f6b/api/records/base/#vectorbtpro.records.base.Records.to_readable) and [MappedArray.to_readable](https://vectorbt.pro/pvt_7a467f6b/api/records/mapped_array/#vectorbtpro.records.mapped_array.MappedArray.to_readable) accept `expand_columns=True` to split column tuples into multiple columns - one per level
 * Fixed row stacking for one-dimensional NumPy arrays
 * Fixed handling of colons in symbols such as `"BTC/USDT:USDT"` in [CCXTData](https://vectorbt.pro/pvt_7a467f6b/api/data/custom/ccxt/#vectorbtpro.data.custom.ccxt.CCXTData). Previously, the first part was mistaken for an exchange even if an exchange was provided.
 * Added option `if_exists` to [IndicatorFactory.register_custom_indicator](https://vectorbt.pro/pvt_7a467f6b/api/indicators/factory/#vectorbtpro.indicators.factory.IndicatorFactory.register_custom_indicator)
 * Added option `magnet_kwargs` to [Data.run](https://vectorbt.pro/pvt_7a467f6b/api/data/base/#vectorbtpro.data.base.Data.run)
 * Added Python 3.12 support ![⚡](https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/26a1.svg)


# Version 2024.1.30[¶](https://vectorbt.pro/pvt_7a467f6b/getting-started/release-notes/2024/#version-2024130 "Permanent link")

 * Introduced a new option `cash_deposits_as_input` that controls whether cash deposits should be added to the input value rather than subtracted from the output value when computing a return
 * Implemented the methods [IndicatorBase.dropna](https://vectorbt.pro/pvt_7a467f6b/api/indicators/factory/#vectorbtpro.indicators.factory.IndicatorBase.dropna) and [Data.dropna](https://vectorbt.pro/pvt_7a467f6b/api/data/base/#vectorbtpro.data.base.Data.dropna) to drop any missing values from an indicator and a data instance respectively
 * Implemented or extended the 4 most basic operations on data. Each operation comprises 5 different methods: one for columns, one for keys, one for features, one for symbols, and one that can determine the right method automatically (listed below). Also, features and symbols have become case-insensitive.
 * [Data.select](https://vectorbt.pro/pvt_7a467f6b/api/data/base/#vectorbtpro.data.base.Data.select): select one or more features or symbols
 * [Data.add](https://vectorbt.pro/pvt_7a467f6b/api/data/base/#vectorbtpro.data.base.Data.add): add (exactly) one feature or symbol
 * [Data.rename](https://vectorbt.pro/pvt_7a467f6b/api/data/base/#vectorbtpro.data.base.Data.rename): rename one or more features or symbols
 * [Data.remove](https://vectorbt.pro/pvt_7a467f6b/api/data/base/#vectorbtpro.data.base.Data.remove): remove one or more features or symbols
 * Expanded registration of custom indicators. A custom indicator now can be registered under a custom location (which defaults to `"custom"`). Custom locations are effectively indicator groups or tags, and are stored as keys in [IndicatorFactory.custom_indicators](https://vectorbt.pro/pvt_7a467f6b/api/indicators/factory/#vectorbtpro.indicators.factory.IndicatorFactory.custom_indicators); they can be listed with [IndicatorFactory.list_custom_locations](https://vectorbt.pro/pvt_7a467f6b/api/indicators/factory/#vectorbtpro.indicators.factory.IndicatorFactory.list_custom_locations). Built-in indicators can be added to custom locations too.
 * [Data.run](https://vectorbt.pro/pvt_7a467f6b/api/data/base/#vectorbtpro.data.base.Data.run) can return a data instance
 * Fixed path resolution and handling of keys with a period (`.`) in [HDFData](https://vectorbt.pro/pvt_7a467f6b/api/data/custom/hdf/#vectorbtpro.data.custom.hdf.HDFData)
 * Fixed filtering by the arguments `start` and `end` in [DuckDBData](https://vectorbt.pro/pvt_7a467f6b/api/data/custom/duckdb/#vectorbtpro.data.custom.duckdb.DuckDBData)
 * Improved resolution of datetime-like arguments (specifically `dt_stop`) in [BasePreparer.prepare_dt_obj](https://vectorbt.pro/pvt_7a467f6b/api/base/reshaping/#vectorbtpro.base.preparing.BasePreparer.prepare_dt_obj). When providing a date such as `"2024-01-01"` or a time such as `"16:00"`, the stop is marked at the provided datetime. When providing a frequency such as `"daily"`, the stop is marked at the end of the last bar of the current period. This behavior can be changed by overriding `last_before` in the argument config of the particular argument. Also, when providing just a time, the marked datetime will overflow to the next day if the requested time comes before the current time. In addition, the user can dynamically pass changes to the argument config by passing `arg_config` as a regular argument, which will be merged over the actual argument config.
 * Implemented NB function [init_FSInOutputs_nb](https://vectorbt.pro/pvt_7a467f6b/api/portfolio/nb/from_signals/#vectorbtpro.portfolio.nb.from_signals.init_FSInOutputs_nb) to initialize in-outputs
 * Implemented a function [get_api_ref](https://vectorbt.pro/pvt_7a467f6b/api/utils/module_/#vectorbtpro.utils.module_.get_api_ref) that for any VBT object returns the corresponding link to the private website and source code. Another function [open_api_ref](https://vectorbt.pro/pvt_7a467f6b/api/utils/module_/#vectorbtpro.utils.module_.open_api_ref) does the same but then automatically opens the link in a browser. If a third-party object was provided, parses the path to the object and opens the first search result on DuckDuckGo.
 * Fixed an error that gets raised when providing an integer (as opposed to floating) account state field to `long_buy_nb`, `long_sell_nb`, `short_sell_nb`, or `short_buy_nb` in [portfolio.nb.core](https://vectorbt.pro/pvt_7a467f6b/api/portfolio/nb/core/)
 * Most classes now have a method [Chainable.pipe](https://vectorbt.pro/pvt_7a467f6b/api/utils/chaining/#vectorbtpro.utils.chaining.Chainable.pipe) that enables built-in and user-defined methods in method chains. Supports deep attribute retrieval.
 * Added a light and dark color palette toggle to the website ![🌔](https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/1f314.svg)
 * Wrote [Easily cross-validate parameters to boost your trading strategy](https://pyquantnews.com/easily-cross-validate-parameters-boost-strategy/) ![📔](https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/1f4d4.svg)